/*!CK:2603399456!*//*1448840699,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["FKyTk"]); }

__d('SearchableTextInput.react',['EventListener','React','AbstractTextFieldMixin.react','AbstractTextInput.react','getActiveElement'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'SearchableTextInput',propTypes:babelHelpers._extends({},j.propTypes,{queryString:m.string,searchSource:m.object,searchSourceOptions:m.object,onEntriesFound:m.func.isRequired,searchOnFocus:m.bool,searchOnUpdate:m.bool,required:m.bool,onPaste:m.func,onFocus:m.func,onChange:m.func}),componentDidMount:function(){if(this.props.onPaste)this._listener=h.listen(this.refs.input.getTextFieldDOM(),'paste',this.props.onPaste);},componentWillReceiveProps:function(o){},componentDidUpdate:function(o){if(this.props.searchOnUpdate)if(o.queryString!==this.props.queryString)this.search(this.props.queryString);},componentWillUnmount:function(){if(this._listener){this._listener.remove();this._listener=null;}},_onInputFocus:function(){this.props.searchSource.bootstrap((function(){if(this.props.searchOnFocus)this.search(this.props.queryString);}).bind(this));this.props.onFocus&&this.props.onFocus();},_onSearchCallback:function(o,p,q){if(this.props.queryString===p)this.props.onEntriesFound(o,p,q);},_onChange:function(event){this.props.onChange&&this.props.onChange(event);var o=event.target.value;setTimeout((function(){return this.search(o);}).bind(this));},search:function(o){this.props.searchSource.search(o,this._onSearchCallback,this.props.searchSourceOptions);},focusInput:function(){var o=this.getTextFieldDOM();if(l()===o){this._onInputFocus();}else o.offsetHeight&&o.focus();},blurInput:function(){var o=this.getTextFieldDOM();o.offsetHeight&&o.blur();},getTextFieldDOM:function(){return this.refs.input.getTextFieldDOM();},render:function(){var o=this.props.queryString||'';return (i.createElement(k,babelHelpers._extends({},this.props,{onChange:this._onChange,onFocus:this._onInputFocus,ref:'input',role:'combobox',value:o})));}});f.exports=n;},null);
__d('TypeaheadView.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'TypeaheadView',propTypes:{entries:j.array.isRequired,extraRendererProps:j.object,highlightedEntry:j.object,isVisible:j.bool,queryString:j.string,Renderer:j.func.isRequired,selectedEntry:j.object},_onSelect:function(l,m){if(this.props.onSelect)this.props.onSelect(l,m);},_onHighlight:function(l){this.props.onHighlight(l);},render:function(){var l=!this.props.isVisible?"hidden_elem":'',m=babelHelpers._extends({highlightedEntry:this.props.highlightedEntry,selectedEntry:this.props.selectedEntry,entries:this.props.entries,onSelect:this._onSelect,onHighlight:this._onHighlight,onRenderHighlight:this.props.onRenderHighlight,ariaOwneeID:this.props.ariaOwneeID,queryString:this.props.queryString},this.props.extraRendererProps),n=this.props.Renderer;return (h.createElement('div',{className:l},h.createElement(n,m)));}});f.exports=k;},null);
__d('AbstractTypeahead.react',['AbstractTextFieldMixin.react','ContextualLayer.react','InputSelection','React','ReactLayeredComponentMixin','SearchableTextInput.react','SearchSourceQueryStatus','TypeaheadNavigation','TypeaheadView.react','cx','getOrCreateDOMID','joinClasses','uniqueID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=k.PropTypes,v=[],w=10,x=k.createClass({displayName:'AbstractTypeahead',mixins:[l],propTypes:babelHelpers._extends({},h.propTypes,{additionalElements:u.node,inputClassName:u.string,inputID:u.string,inputStyle:u.object,autoCapitalize:u.string,autoComplete:u.string,autoCorrect:u.string,queryString:u.string,searchSource:u.object.isRequired,searchSourceOptions:u.object,excludedEntries:u.object,presenter:u.object.isRequired,onSelectAttempt:u.func,onEntriesFound:u.func,onNoEntriesFound:u.func,onEnterWithoutSelection:u.func,autoHighlight:u.bool,showEntriesOnFocus:u.bool,selectOnBlur:u.bool,selectOnTab:u.bool,focusedOnInit:u.bool,hideViewWithEntries:u.bool,disabled:u.bool,entriesWidthMatchContext:u.bool,selectedEntry:u.object,onTypeaheadVisibilityChanged:u.func,onPaste:u.func,navigation:u.object}),getDefaultProps:function(){return {autoComplete:'off',autoCorrect:'off',selectOnBlur:false,selectOnTab:true,hideViewWithEntries:true,entriesWidthMatchContext:true,navigation:o};},getInitialState:function(){return {highlightedEntry:null,isArrowNavigation:false,isAutoHighlight:this.props.autoHighlight,ariaActiveDescendantID:null,ariaOwneeID:t(),activeEntries:null,focused:!!this.props.focusedOnInit,viewIsVisible:!!this.props.focusedOnInit};},_onRenderHighlight:function(y){var z=r(y);this.setState({ariaActiveDescendantID:z});},_determineViewVisibility:function(y,z){if(!y)return false;var aa=y.length>0&&(this.props.showEntriesOnFocus||this.props.queryString.length>0);return !!(z&&(this.props.presenter.alwaysVisibleOnFocus||aa));},_onEntriesFound:function(y,z,aa){if(!this.isMounted())return;if(this.props.excludedEntries){var ba=this.props.excludedEntries;y=y.filter(function(ja){return !ba.hasOwnProperty(ja.getUniqueID());});}var ca=this.props.presenter,da=typeof ca.sortEntries=='function'?ca.sortEntries(y,this.state.activeEntries,this.props.queryString):y,ea=da.slice(0,ca.maxEntries||w),fa=this._determineViewVisibility(ea,this.state.focused);if(!ea.length){this.setState({ariaActiveDescendantID:null,activeEntries:ea,highlightedEntry:null,isAutoHighlight:this.props.autoHighlight});this._setViewIsVisible(fa);if(this.props.onNoEntriesFound&&aa===n.COMPLETE)this.props.onNoEntriesFound();return;}if(this.props.onEntriesFound)this.props.onEntriesFound(ea,aa);var ga=this.state.highlightedEntry,ha=ga&&ea.indexOf(ga)!==-1;if(!this.props.autoHighlight){this.setState({activeEntries:ea,highlightedEntry:ha?ga:null});if(fa)this._setViewIsVisible(true);return;}var ia=this.state.isAutoHighlight;if(ia){ga=ea[0];}else{ga=ha?ga:ea[0];ia=!ha;}this.setState({activeEntries:ea,highlightedEntry:ga,isAutoHighlight:ia});if(fa)this._setViewIsVisible(true);},_onInputFocus:function(){var y=this._determineViewVisibility(this.state.activeEntries,true);if(y)this._setViewIsVisible(true);this.setState({focused:true});this.props.onFocus&&this.props.onFocus();},_onInputBlur:function(){if(this.props.hideViewWithEntries)this._close();if(this.props.selectOnBlur&&this.state.highlightedEntry)this.props.onSelectAttempt(this.state.highlightedEntry);this.setState({focused:false});this.props.onBlur&&this.props.onBlur();},_onInputClick:function(y){var z=this.getTextFieldDOM(),aa=j.get(z);if(aa&&aa.start==aa.end)z.select();this.props.onClick&&this.props.onClick(y);},_onEscape:function(){this._close();this.blurInput();this.setState({focused:false});this.props.onEscape&&this.props.onEscape();},_onEnter:function(event){if(this.props.onEnterWithoutSelection&&(!this.state.viewIsVisible||!this.state.highlightedEntry)){this.props.onEnterWithoutSelection(event);return;}if(!this.state.viewIsVisible)return;if(!this.state.highlightedEntry){event.preventDefault();return;}if(this.props.hideViewWithEntries)this._close();if(this.props.onSelectAttempt)this.props.onSelectAttempt(this.state.highlightedEntry,event);event.preventDefault();},_onTab:function(event){if(this.props.selectOnTab&&this.state.viewIsVisible&&this.props.onSelectAttempt&&this.state.highlightedEntry){if(this.props.hideViewWithEntries){this._close();event.preventDefault();}this.props.onSelectAttempt(this.state.highlightedEntry,event);}},_onDownArrow:function(event){event.preventDefault();this.props.navigation.moveDown(this.state.activeEntries||v,this.state.highlightedEntry,this._setHighlight);},_onUpArrow:function(event){event.preventDefault();this.props.navigation.moveUp(this.state.activeEntries||v,this.state.highlightedEntry,this._setHighlight);},_setHighlight:function(y){this.setState({highlightedEntry:y,isArrowNavigation:true,isAutoHighlight:!y});},_onInputChange:function(event){if(this.props.onChange)this.props.onChange(event);this._setViewIsVisible(this.state.focused&&(this.props.showEntriesOnFocus||event.target.value.length>0)&&(this.props.presenter.alwaysVisibleOnFocus||this.state.activeEntries!=null&&this.state.activeEntries.length>0));},_onViewHighlight:function(y){this.setState({highlightedEntry:y,isArrowNavigation:false,isAutoHighlight:false});},_getView:function(){return (k.createElement(p,{Renderer:this.props.presenter.ViewRenderer,extraRendererProps:babelHelpers._extends({},this.props.presenter.extraRendererProps,{isArrowNavigation:this.state.isArrowNavigation}),highlightedEntry:this.state.highlightedEntry,selectedEntry:this.props.selectedEntry,isVisible:this.state.viewIsVisible,ariaOwneeID:this.state.ariaOwneeID,onHighlight:this._onViewHighlight,onRenderHighlight:this._onRenderHighlight,onSelect:this.props.onSelectAttempt,entries:this.state.activeEntries||v,queryString:this.props.queryString}));},_setViewIsVisible:function(y){if(y!==this.state.viewIsVisible){if(this.props.onTypeaheadVisibilityChanged)this.props.onTypeaheadVisibilityChanged(y,this.state.activeEntries||v);this.setState({viewIsVisible:y});}},componentWillReceiveProps:function(y){if(!y.queryString&&!this.props.showEntriesOnFocus)this.clearActiveEntries();},componentDidUpdate:function(){var y=this._determineViewVisibility(this.state.activeEntries,this.state.focused);if(y)this._setViewIsVisible(true);},renderLayers:function(){if(!this.props.presenter.useLayer)return {};var y=null,z=null;if(this.props.context){y=this.props.context;}else z=(function(){return this.refs.input;}).bind(this);return {typeaheadView:k.createElement(i,{alignment:this.props.presenter.alignment,behaviors:this.props.presenter.layerBehaviors,containerWidthMatchContext:this.props.entriesWidthMatchContext,contextRef:z,context:y,position:this.props.presenter.layerPosition||"below",shown:this.state.viewIsVisible,shouldSetARIAProperties:false},this._getView())};},render:function(){var y=this.state.activeEntries,z=!!(y&&y.length),aa=k.createElement(m,{'aria-activedescendant':this.state.ariaActiveDescendantID,'aria-expanded':z,'aria-autocomplete':'list','aria-label':this.props.ariaLabel,'aria-owns':this.state.ariaOwneeID,required:this.props.required,ref:'input',autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:this.props.inputClassName,id:this.props.inputID,queryString:this.props.queryString,placeholder:this.props.placeholder,maxLength:this.props.maxLength,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,searchOnFocus:!!this.props.showEntriesOnFocus,disabled:this.props.disabled,onEntriesFound:this._onEntriesFound,onEscape:this._onEscape,onBlur:this._onInputBlur,onFocus:this._onInputFocus,onChange:this._onInputChange,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,onTab:this._onTab,onEnter:this._onEnter,onBackspace:this.props.onBackspace,onPaste:this.props.onPaste,onClick:this._onInputClick,style:this.props.inputStyle,tabIndex:this.props.tabIndex}),ba=null;if(!this.props.presenter.useLayer)ba=this._getView();return (k.createElement('span',babelHelpers._extends({},this.props,{className:s(this.props.className,"_58ah"),onBlur:null,onClick:null,onFocus:null,tabIndex:null}),aa,this.props.additionalElements,ba));},componentDidMount:function(){if(this.props.focusedOnInit)this.focusInput();},clearActiveEntries:function(){this.setState({ariaActiveDescendantID:null,activeEntries:null,highlightedEntry:null});},focusInput:function(){var y=this.getTextFieldDOM();if(y.value)j.set(y,y.value.length);this.refs.input.focusInput();},blurInput:function(){if(this.refs.input.blur){this.refs.input.blur();}else if(this.refs.input.blurInput)this.refs.input.blurInput();},hideView:function(){this._setViewIsVisible(false);},_close:function(){this._setViewIsVisible(false);this.clearActiveEntries();},getTextFieldDOM:function(){return this.refs.input.getTextFieldDOM();}});f.exports=x;},null);
__d('XUITypeaheadTextOnlyView.react',['React','TypeaheadViewItem','TypeaheadViewPropTypes','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'XUITypeaheadTextOnlyViewItem',mixins:[i.Mixin],propTypes:i.propTypes,render:function(){var n=this.props.entry,o="_599m"+(this.props.highlighted?' '+"_599n":'');return (h.createElement('li',{'aria-label':n.getTitle(),'aria-selected':this.props.highlighted,className:o,key:n.getUniqueID(),onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role,title:n.getTitle()},h.createElement('div',{className:"_599p"},n.getTitle())));}}),m=h.createClass({displayName:'XUITypeaheadTextOnlyView',propTypes:j,getDefaultProps:function(){return {role:'listbox'};},_renderItem:function(n){var o=n===this.props.highlightedEntry;return (h.createElement(l,{entry:n,highlighted:o,key:n.getUniqueID(),onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var n="_599r"+(!this.props.entries.length?' '+"_599s":'');return (h.createElement('ul',{className:n,id:this.props.ariaOwneeID,role:this.props.role},this.props.entries.map(this._renderItem)));}});f.exports=m;},null);
__d('XUITypeahead.react',['AbstractTypeahead.react','React','Image.react','SearchableEntry','XUICloseButton.react','XUIError.react','XUITypeaheadTextOnlyView.react','XUITypeaheadView.react','cx','joinClasses','update'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=i.PropTypes,t={ViewRenderer:o,useLayer:true},u={ViewRenderer:o,useLayer:false},v={ViewRenderer:n,useLayer:true},w=i.createClass({displayName:'XUITypeahead',propTypes:babelHelpers._extends({maxEntries:s.number,onChange:s.func.isRequired,onSelectAttempt:s.func.isRequired,onEntriesFound:s.func,onNoEntriesFound:s.func,selectedEntry:s.instanceOf(k),tallInput:s.bool,viewStyle:s.oneOf(['textonly','rich','richNoLayer']),clearable:s.bool,onClear:s.func,showPhoto:s.bool,highlightOnSelect:s.bool,presenter:s.object,inputID:s.string},m.propTypes),getDefaultProps:function(){return {viewStyle:'rich'};},componentWillMount:function(){},focusInput:function(){this.refs.typeahead&&this.refs.typeahead.focusInput();},blurInput:function(){this.refs.typeahead&&this.refs.typeahead.blurInput();},hideView:function(){this.refs.typeahead.hideView();},getTextFieldDOM:function(){return this.refs.typeahead.getTextFieldDOM();},_onClear:function(){this.props.onClear();setTimeout((function(){return this.focusInput();}).bind(this),0);},render:function(){var x="_55r1"+(!!this.props.tallInput?' '+"_55r2":''),y=null;if(this.props.presenter){y=this.props.presenter;}else if(this.props.viewStyle=='rich'){y=t;}else if(this.props.viewStyle=='richNoLayer'){y=u;}else y=v;if(!this.props.presenter&&this.props.maxEntries)y=r(y,{maxEntries:{$set:this.props.maxEntries}});var z=this.props.showPhoto&&this.props.selectedEntry?i.createElement(j,{className:"_wrl",src:this.props.selectedEntry.getPhoto()}):null,aa=this.props.clearable?i.createElement(l,{className:"_wrm"+(!this.props.queryString?' '+"hidden_elem":''),size:this.props.tallInput?'medium':'small',type:'button',onClick:this._onClear}):null,ba=this.props,ca=ba.className,da=babelHelpers.objectWithoutProperties(ba,['className']);return (i.createElement(m,this.props,i.createElement('span',{className:q("_wrn"+(!!this.props.tallInput?' '+"_213j":'')+(!!aa?' '+"_4ehf":'')+(!!z?' '+"_4ehg":'')+(!!this.props.queryString?' '+"_4in7":'')+(this.props.highlightOnSelect&&this.props.selectedEntry?' '+"_wrr":''),ca)},z,i.createElement(h,babelHelpers._extends({},da,{inputClassName:x,ref:'typeahead',presenter:y})),aa)));}});f.exports=w;},null);
__d('PagesComposerUnpublishedPostsStore',['ReactComposerStoreBase','PagesComposerActionsTypes'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k,l={isDraft:false,scheduledPublishTime:null,backdateConfig:null,isAdsPost:false,stopFeedDistributionDate:null};j=babelHelpers.inherits(m,h);k=j&&j.prototype;function m(){'use strict';var n;k.constructor.call(this,function(){return Object.assign({},l);},function(o){switch(o.type){case i.BACKDATE:n&&n.$PagesComposerUnpublishedPostsStore1(o);break;case i.SET_DRAFT:n&&n.$PagesComposerUnpublishedPostsStore2(o);break;case i.SCHEDULE:n&&n.$PagesComposerUnpublishedPostsStore3(o);break;case i.SET_ADS_POST:n&&n.$PagesComposerUnpublishedPostsStore4(o);break;}});n=this;}m.prototype.getBackdateConfig=function(n){'use strict';return this.getComposerData(n).backdateConfig;};m.prototype.getIsDraft=function(n){'use strict';return this.getComposerData(n).isDraft;};m.prototype.getScheduledPublishTime=function(n){'use strict';return this.getComposerData(n).scheduledPublishTime;};m.prototype.getStopFeedDistributionTime=function(n){'use strict';return this.getComposerData(n).stopFeedDistributionDate;};m.prototype.getIsAdsPost=function(n){'use strict';return this.getComposerData(n).isAdsPost;};m.prototype.$PagesComposerUnpublishedPostsStore1=function(n){'use strict';var o=this.getComposerData(n.composerID);o.backdateConfig={year:n.year,month:n.month,day:n.day,hideFromNewsFeed:n.hideFromNewsFeed};};m.prototype.$PagesComposerUnpublishedPostsStore3=function(n){'use strict';var o=this.getComposerData(n.composerID);o.scheduledPublishTime=n.scheduleDate;o.stopFeedDistributionDate=n.stopFeedDistributionDate;};m.prototype.$PagesComposerUnpublishedPostsStore2=function(n){'use strict';var o=this.getComposerData(n.composerID);o.isDraft=true;};m.prototype.$PagesComposerUnpublishedPostsStore4=function(n){'use strict';var o=this.getComposerData(n.composerID);o.isAdsPost=true;};f.exports=new m();},null);
__d('PagesComposer',['ActorURI','Arbiter','AsyncRequest','Bootloader','ComposerXMarauderLogger','ComposerXStore','DOM','PagesComposerUnpublishedPostsStore','Parent','ReloadPage','Run','XUnpublishedPostSuccessController','$','csx','cx','getObjectValues','goURI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y,z;function aa(){l.logCompleted(y.id);}function ba(da){if(da.hidePost){var ea=m.getAllForComposer(y.id);if(!w(ea).length){var fa=null;if(o.getIsDraft(y.id))fa='draft';if(o.getScheduledPublishTime(y.id))fa='scheduled';if(fa){var ga=s.getURIBuilder().setString('type',fa).getURI();ga=h.create(ga,z);new j().setURI(ga).send();}}aa();return;}if(da.redirect){var ea=m.getAllForComposer(y.id);w(ea).forEach(function(ia){if(ia.reset)ia.reset(ia);});x(da.redirect);aa();return;}if(!da.streamStory){q.now();return;}if(da.backdatedTime){k.loadModules(["PagesStoryPublisher"],function(ia){ia.publish(da);});aa();return;}var ha=ca.renderStory(y,da.streamStory);i.inform('TimelineComposer/on_after_publish',ha,i.BEHAVIOR_PERSISTENT);aa();}var ca={init:function(da,ea){y=t(da);z=ea;var fa=i.subscribe('composer/publish',function(event,ga){if(ga.composer_id===y.id)ba(ga);});r.onLeave(fa.unsubscribe.bind(fa));},renderStory:function(da,ea){var fa=p.byClass(da,"_2gqw");if(!fa)return;var ga=n.scry(fa,"._5sem")[0],ha=n.prependContent(ga,ea)[0];k.loadModules(["Animation"],function(ia){new ia(ha).from('backgroundColor','#fff8dd').to('backgroundColor','#fff').duration(2000).ease(ia.ease.both).go();});return ha;},replaceByID:function(da,ea){n.replace(t(da),ea);}};f.exports=b.PagesComposer||ca;},null);
__d("TypeaheadMetricCounter",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){"use strict";this.reset();}h.prototype.reset=function(){"use strict";this.stats={};this.avgStats={};};h.prototype.recordStat=function(i,j){"use strict";this.stats[i]=j;};h.prototype.recordCountStat=function(i){"use strict";var j=this.stats[i];this.stats[i]=j?j+1:1;};h.prototype.recordAvgStat=function(i,j){"use strict";if(this.avgStats[i]){this.avgStats[i][0]+=j;this.avgStats[i][1]+=1;}else this.avgStats[i]=[j,1];};h.prototype.hasStats=function(){"use strict";return !!Object.keys(this.stats).length;};h.prototype.getStats=function(){"use strict";var i=babelHelpers._extends({},this.stats);for(var j in this.avgStats){var k=this.avgStats[j];i[j]=k[0]/k[1];}return i;};f.exports=h;},null);
__d('TypeaheadMetricReporter',['AsyncRequest','QueriesHistory','TypeaheadMetricCounter','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='/ajax/typeahead/record_basic_metrics.php',m=1000;function n(o){'use strict';this.counter=new j();this.extraData=Object.assign({},o);this.bootstrapped=false;this.bootstrapBegin=Date.now();this.queriesHistory=new i(m);this.lastQuery=null;this.sessionActive=false;this.lastNotBackspacedQuery='';this.lastRequestID=null;this.requestIDHistory=[];this.$TypeaheadMetricReporter1();}n.prototype.getSID=function(){'use strict';return this.sid;};n.prototype.sessionStart=function(){'use strict';this.sessionActive=true;this.sessionStartTime=Date.now();};n.prototype.sessionEnd=function(){'use strict';if(this.sessionActive){this.$TypeaheadMetricReporter2();this.$TypeaheadMetricReporter1();this.sessionActive=false;}};n.prototype.sessionKill=function(){'use strict';if(this.sessionActive){this.$TypeaheadMetricReporter1();this.sessionActive=false;}};n.prototype.sessionPause=function(){'use strict';if(this.sessionActive){this.$TypeaheadMetricReporter2();this.sessionActive=false;}};n.prototype.reportSelect=function(o,p,q,r,s,t){'use strict';s=s==null?this.lastQuery:s;this.counter.recordStat('selected_id',o||'SELECT_NULL');this.counter.recordStat('selected_type',p);this.counter.recordStat('selected_position',q);this.counter.recordStat('selected_with_mouse',r?1:0);this.counter.recordStat('selected_query',s);for(var u in t)this.counter.recordStat(u,t[u]);};n.prototype.reportStrategyName=function(o){'use strict';this.counter.recordStat('strategy_name',o);};n.prototype.reportBootstrapBegin=function(){'use strict';this.bootstrapBegin=Date.now();};n.prototype.reportBootstrapDirty=function(){'use strict';this.bootstrapped=false;};n.prototype.reportBootstrapComplete=function(o){'use strict';this.counter.recordAvgStat('bootstrap_latency',Date.now()-this.bootstrapBegin);var p={};o.forEach(function(q){p[q]=(p[q]||0)+1;});this.counter.recordStat('bootstrap_response_types',p);this.bootstrapped=true;};n.prototype.reportQueryBegin=function(o){'use strict';this.counter.recordStat('query',o);this.counter.recordCountStat('num_queries');this.queriesHistory.add(o);if(this.lastNotBackspacedQuery.indexOf(o)!==0)this.lastNotBackspacedQuery=o;this.lastQuery=o;this.lastQueryTime=Date.now();};n.prototype.reportRequestID=function(o){'use strict';this.lastRequestID=o;this.requestIDHistory.push(o);};n.prototype.reportQueryComplete=function(o,p){'use strict';this.counter.recordAvgStat('avg_query_latency',o);if(p!==undefined)this.counter.recordStat('filtered_count',p);};n.prototype.reportResults=function(o,p){'use strict';this.results=o;if(p===this.lastQuery)this.counter.recordStat('last_query_latency',Date.now()-this.lastQueryTime);};n.prototype.$TypeaheadMetricReporter1=function(){'use strict';this.sid=Math.floor(Date.now()*Math.random());this.lastNotBackspacedQuery='';this.queriesHistory.reset();this.results=null;this.lastRequestID=null;this.requestIDHistory=[];this.counter.reset();this.emit&&this.emit('reset',{sid:this.sid});};n.prototype.$TypeaheadMetricReporter3=function(){'use strict';var o={};for(var p in this.extraData){var q=this.extraData[p];o[p]=typeof q==='function'?q():q;}return o;};n.prototype.$TypeaheadMetricReporter2=function(){'use strict';if(this.counter.hasStats()){this.counter.recordStat('session_time',Date.now()-this.sessionStartTime);if(this.results)this.counter.recordStat('candidate_results',JSON.stringify(this.results));if(this.sid)this.counter.recordStat('sid',this.sid);if(this.lastNotBackspacedQuery)this.counter.recordStat('last_not_backspaced_query',this.lastNotBackspacedQuery);this.counter.recordStat('queries_history',JSON.stringify(this.queriesHistory.getQueries()));if(this.bootstrapped)this.counter.recordStat('bootstrapped',1);if(this.lastRequestID)this.counter.recordStat('request_id',this.lastRequestID);if(this.requestIDHistory.length)this.counter.recordStat('request_ids',this.requestIDHistory);var o=babelHelpers._extends({},this.counter.getStats(),this.$TypeaheadMetricReporter3());new h().setURI(l).setMethod('POST').setData({stats:o}).send();this.emit&&this.emit('submitted',o);}};k(n,{reset:true,submitted:true});f.exports=n;},null);